@page "/perametersetup/module"
@inject NavigationManager NavigationManager
@inject SMEapps.Shared.Services.ISStore SStore

<MudContainer MaxWidth="MaxWidth.False" Class="pa-4">
    <MudPaper Class="py-4">
        <MudText Typo="Typo.h6" Class="ma-4 ">Add Module</MudText>

        <MudContainer MaxWidth="MaxWidth.False" Class="px-4">
            <MudPaper Class="pa-4">

                <MudForm @ref="form">

                    <MudGrid Class="mb-2">
                        <MudItem xs="12" sm="6" md="4"><MudTextField Label="Title" @bind-Value="Model.Title" /></MudItem>
                        <MudItem xs="12" sm="6" md="4"><MudTextField Label="Module Name" @bind-Value="Model.ModuleName" Required="true" /></MudItem>
                        <MudItem xs="12" sm="6" md="4"><MudTextField Label="Icon" @bind-Value="Model.IconName" /></MudItem>
                    </MudGrid>

                    <MudGrid Class="mb-2">
                        <MudItem xs="12" sm="6" md="4"><MudNumericField Label="MenuPosition" @bind-Value="Model.MenuPosition" Required="true" /></MudItem>
                        <MudItem xs="12" sm="6" md="4" Style="display:flex; align-items:flex-end;"><MudSwitch @bind-Value="Model.IsActive" Label="Is Active" Color="Color.Primary" /></MudItem>
                    </MudGrid>


                    <MudCardActions Class="justify-end mb-3">
                        <MudButton Color="Color.Error" Variant="Variant.Filled" OnClick="Reset">Reset</MudButton>
                        <MudButton Color="Color.Primary" Variant="Variant.Filled" OnClick="Save" Disabled="@_processing" Class="ms-2">@btnTest</MudButton>
                    </MudCardActions>
                </MudForm>

            </MudPaper>

        </MudContainer>


    </MudPaper>


</MudContainer>

<MudContainer MaxWidth="MaxWidth.False" Class="pa-4">
    <MudPaper Class="pa-4">
        <MudTable Items="@moduleList">

            <ToolBarContent>
                <MudText Typo="Typo.h6">Module List</MudText>
                <MudSpacer />
                <MudTextField @bind-Value="searchString" Placeholder="Search"
                              Adornment="Adornment.Start" AdornmentIcon="@Icons.Material.Filled.Search" />
            </ToolBarContent>

            <HeaderContent>
                <MudTh>Title</MudTh>
                <MudTh>Module Name</MudTh>
                <MudTh>Icon</MudTh>
                <MudTh>Position</MudTh>
                <MudTh>Action</MudTh>
            </HeaderContent>

            <RowTemplate>
                <MudTd DataLabel="Title">@context.Title</MudTd>
                <MudTd DataLabel="Module Name">@context.ModuleName</MudTd>
                <MudTd DataLabel="Icon">@context.IconName</MudTd>
                <MudTd DataLabel="Icon">@context.MenuPosition</MudTd>
                <MudTd DataLabel="Action">
                    <MudFab Color="Color.Secondary" StartIcon="@Icons.Material.Outlined.Edit" Size="Size.Small" OnClick="@(() => Edit(context))" />
                    <MudFab Color="Color.Error" StartIcon="@Icons.Material.Outlined.Delete" OnClick="@(() => Delete(context.ModuleId))" Size="Size.Small" />
                </MudTd>
            </RowTemplate>

            <PagerContent>
                <MudTablePager />
            </PagerContent>
        </MudTable>



    </MudPaper>


</MudContainer>
