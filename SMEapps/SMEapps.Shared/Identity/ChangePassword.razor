@page "/identity/change-password"
@inject NavigationManager Nav
@inject IHttpClientFactory ClientFactory


@* <div class="full-center">
    <FluentCard Class="p-6 shadow-lg" Style="width: 400px;">
        <h2 class="text-center mb-4">Change Your Password</h2>
        @if (isLoading)
        {
            <div class="text-center py-4">
                <FluentProgressRing />
                <p class="mt-2">Changing password…</p>
            </div>
        }
        else
        {
            <EditForm Model="@ChangePassmodel" OnValidSubmit="@HandleChangePassword">
                <DataAnnotationsValidator />
                <ValidationSummary class="text-danger mb-3" />


                <div class="mb-3">

                    <FluentTextField @bind-Value="ChangePassmodel.Email"
                                     Placeholder="Enter your email"
                                     Class="w-100" />
                    <ValidationMessage For="() => ChangePassmodel.Email" class="text-danger small" />
                </div>

                <div class="mb-3">
                    <FluentLabel For="() => ChangePassmodel.OldPassword">Current Password</FluentLabel>
                    <FluentTextField @bind-Value="ChangePassmodel.OldPassword"
                                     Type="@(showOldPassword ? "text" : "password")"
                                     Class="w-100" />
                    <ValidationMessage For="() => ChangePassmodel.OldPassword" class="text-danger small" />

                </div>


                <div class="mb-3">
                    <FluentLabel For="() => ChangePassmodel.NewPassword">New Password</FluentLabel>
                    <FluentTextField @bind-Value="ChangePassmodel.NewPassword"
                                     Type="@(showNewPassword ? "text" : "password")"
                                     Class="w-100" />
                    <ValidationMessage For="() => ChangePassmodel.NewPassword" class="text-danger small" />

                </div>


                <div class="mb-3">
                    <FluentLabel For="() => ChangePassmodel.ConfirmPassword">Confirm New Password</FluentLabel>
                    <FluentTextField @bind-Value="ChangePassmodel.ConfirmPassword"
                                     Type="@(showConfirmPassword ? "text" : "password")"
                                     Class="w-100" />
                    <ValidationMessage For="() => ChangePassmodel.ConfirmPassword" class="text-danger small" />

                </div>

                @if (!string.IsNullOrEmpty(Message))
                {
                    <FluentMessageBar Class="mb-3">
                        @Message
                    </FluentMessageBar>
                }

                <div class="d-flex gap-2">
                    <FluentButton Appearance="Appearance.Accent"
                                  Type="ButtonType.Submit"
                                  Loading="@isLoading">
                        Change Password
                    </FluentButton>
                    <FluentButton Appearance="Appearance.Neutral"
                                  OnClick="Cancel">
                        Cancel
                    </FluentButton>
                </div>
            </EditForm>
        }
        </FluentCard>
        </div> *@