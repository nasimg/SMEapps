@page "/identity/register"
@layout IdentityLayout
@namespace SMEapps.Shared.Identity
@using System.ComponentModel.DataAnnotations
@using SMEapps.Shared.Model

<MudPaper Class="d-flex justify-center align-center p-6" Style="min-height: 100vh; background: #f9fafb;">
    <MudCard Style="max-width: 960px; width: 100%; padding: 40px; box-shadow: 0 8px 24px rgba(0,0,0,0.1); border-radius: 16px;">
        <MudText Typo="Typo.h4" Class="mb-4 font-weight-bold text-primary">Create your account</MudText>

        <EditForm Model="@Model" OnValidSubmit="@HandleValidSubmit">
            <DataAnnotationsValidator />
            <ValidationSummary />

            <MudGrid>
                <!-- LEFT: illustration -->
                <MudItem xs="12" md="6" Class="flex flex-col justify-center items-center text-center p-4">
                    <MudImage Src="images/login.svg" Alt="Register"
                              Style="max-width: 100%; height: auto; margin-bottom: 1rem;" />
                    <MudText Typo="Typo.subtitle1">Welcome! Please fill in your details to register.</MudText>
                </MudItem>

                <!-- RIGHT: form fields -->
                <MudItem xs="12" md="6" Class="p-4">
                    <MudText Typo="Typo.h6" Class="mb-3">Account Information</MudText>

                    <MudTextField @bind-Value="Model.Email"
                                  Label="Email"
                                  Variant="Variant.Outlined"
                                  FullWidth="true"
                                  Required="true"
                                  Class="mb-3" />

                    <MudTextField @bind-Value="Model.PhoneNumber"
                                  Label="Phone Number"
                                  Variant="Variant.Outlined"
                                  FullWidth="true"
                                  Required="true"
                                  Class="mb-3" />

                    <MudTextField @bind-Value="Model.Password"
                                  Label="Password"
                                  Variant="Variant.Outlined"
                                  InputType="InputType.Password"
                                  FullWidth="true"
                                  Required="true"
                                  Class="mb-3" />

                    <MudTextField @bind-Value="Model.ConfirmPassword"
                                  Label="Confirm Password"
                                  Variant="Variant.Outlined"
                                  InputType="InputType.Password"
                                  FullWidth="true"
                                  Required="true"
                                  Class="mb-3" />
                </MudItem>
            </MudGrid>

            <div class="text-right mt-4">
                <MudButton Variant="Variant.Filled"
                           Color="Color.Primary"
                           ButtonType="ButtonType.Submit"
                           Disabled="@IsLoading">
                    @if (IsLoading)
                    {
                        <MudProgressCircular Indeterminate="true" Size="Size.Small" Class="mr-2" />
                        <span>Registering…</span>
                    }
                    else
                    {
                        <span>Register</span>
                    }
                </MudButton>
            </div>
        </EditForm>
    </MudCard>
</MudPaper>