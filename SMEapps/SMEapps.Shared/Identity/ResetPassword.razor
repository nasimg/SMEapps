@page "/identity/reset-password"
@inject NavigationManager Nav
@inject IHttpClientFactory ClientFactory
@inject IToastService ToastService
@layout IdentityLayout


<div class="full-center">
    <FluentCard Class="p-6 shadow-lg" Style="width: 400px;">
        <h2 class="text-center mb-4">Reset Your Password</h2>

        <EditForm Model="@resetModel" OnValidSubmit="@ResetPasswordHandler">
            <DataAnnotationsValidator />
            <ValidationSummary class="text-danger mb-3" />
            <FluentTextField Label="Email"
                             @bind-Value="resetModel.Email"
                             ReadOnly="true"
                             Style="width: 100%; margin-bottom: 1rem;" />

            <FluentTextField Label="New Password"
                             @bind-Value="resetModel.NewPassword"
                             Type="Password"
                             Required="true"
                             Placeholder="Enter your new password"
                             Style="width: 100%; margin-bottom: 1rem;" />
            <ValidationMessage For="@(() => resetModel.NewPassword)" class="text-danger" />

            <FluentTextField Label="Confirm Password"
                             @bind-Value="resetModel.ConfirmPassword"
                             Type="Password"
                             Required="true"
                             Placeholder="Confirm your new password"
                             Style="width: 100%; margin-bottom: 1.5rem;" />
            <ValidationMessage For="@(() => resetModel.ConfirmPassword)" class="text-danger" />

            <!-- Submit Button -->
            <FluentButton Appearance="Appearance.Accent"
                          Type="ButtonType.Submit"
                          Loading="@isLoading">
                Reset Password
            </FluentButton>
        </EditForm>
    </FluentCard>
</div>
<FluentToastProvider />
<style>
    .full-center {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        background: var(--neutral-fill-rest);
        padding: 1rem;
    }

    .validation-error {
        font-size: 0.875rem;
        color: var(--danger-foreground);
    }
</style>
